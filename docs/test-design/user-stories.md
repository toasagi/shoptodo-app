# ユーザーストーリー
## ShopTodo E2Eテスト練習用アプリケーション

---

### 文書情報
- **文書ID**: US-001
- **版数**: 1.0
- **作成日**: 2025-09-21
- **作成者**: Claude Code
- **承認者**: Product Owner
- **最終更新**: 2025-09-21
- **関連文書**: 要件分析書(RA-001), テスト戦略書(TS-001)

---

## 1. ユーザーストーリー概要

### 1.1 目的
ShopTodoアプリケーションの機能要件をアジャイル開発手法に基づくユーザーストーリー形式で定義し、テスト設計の基盤とする。

### 1.2 ペルソナ定義

#### 主要ペルソナ1: テスト学習者
- **名前**: 田中太郎（Taro Tanaka）
- **年齢**: 28歳
- **職業**: Junior QAエンジニア
- **背景**: IT業界2年目、E2Eテスト自動化を学習中
- **目標**: 実践的なテスト技法を習得し、キャリアアップを図る

#### 主要ペルソナ2: テスト指導者
- **名前**: 佐藤花子（Hanako Sato）
- **年齢**: 35歳
- **職業**: Senior QAエンジニア/研修講師
- **背景**: QA歴10年、テスト自動化エキスパート
- **目標**: 効果的なE2Eテスト研修カリキュラムの提供

#### 補助ペルソナ3: 一般利用者
- **名前**: 山田次郎（Jiro Yamada）
- **年齢**: 42歳
- **職業**: 一般的なWebアプリケーション利用者
- **背景**: IT非専門職、日常的にオンラインショッピングを利用
- **目標**: 直感的で使いやすいショッピング体験

---

## 2. 認証機能ユーザーストーリー

### US-001: ログイン機能
**As a** テスト学習者
**I want to** デモ認証でログインできる
**So that** 認証機能のテスト方法を学習できる

#### 受入基準
- [ ] ユーザー名「demo」、パスワード「password」でログインできる
- [ ] ログイン成功後、ダッシュボード画面に遷移する
- [ ] ログイン状態がlocalStorageに保存される
- [ ] ページリロード後もログイン状態が維持される
- [ ] 不正な認証情報の場合、エラーメッセージが表示される

#### テストシナリオ例
```gherkin
Scenario: 正常ログイン
  Given ログインページが表示されている
  When ユーザー名「demo」とパスワード「password」を入力する
  And ログインボタンをクリックする
  Then ダッシュボードページに遷移する
  And ログイン状態が保存される
```

### US-002: ログアウト機能
**As a** テスト学習者
**I want to** ログアウトできる
**So that** セッション管理のテスト方法を学習できる

#### 受入基準
- [ ] ログアウトボタンからログアウトできる
- [ ] ログアウト後、ログインページに遷移する
- [ ] localStorageからログイン情報が削除される
- [ ] ログアウト後、認証が必要なページにアクセスできない

### US-003: セッション管理
**As a** テスト学習者
**I want to** ログイン状態を自動復元できる
**So that** 永続化機能のテスト方法を学習できる

#### 受入基準
- [ ] ページリロード後もログイン状態が維持される
- [ ] ブラウザ再起動後も状態が復元される（localStorage利用）
- [ ] 複数タブ間で状態が同期される

---

## 3. 商品カタログ機能ユーザーストーリー

### US-004: 商品一覧表示
**As a** 一般利用者
**I want to** 商品一覧を閲覧できる
**So that** 購入したい商品を探すことができる

#### 受入基準
- [ ] 12個の商品が表示される
- [ ] 各商品に名前、価格、カテゴリが表示される
- [ ] 商品画像のプレースホルダーが表示される
- [ ] レスポンシブレイアウトで表示される

### US-005: 商品検索機能
**As a** 一般利用者
**I want to** 商品名で検索できる
**So that** 目的の商品を素早く見つけることができる

#### 受入基準
- [ ] 検索キーワードの部分一致で検索できる
- [ ] 日本語と英語の両方で検索できる
- [ ] 検索結果がリアルタイムで表示される
- [ ] 検索結果が0件の場合、適切なメッセージが表示される
- [ ] 検索ボックスのクリアで全商品が再表示される

#### テストシナリオ例
```gherkin
Scenario: 商品名による検索
  Given 商品一覧ページが表示されている
  When 検索ボックスに「スマート」と入力する
  Then 「スマートフォン」を含む商品のみが表示される
```

### US-006: カテゴリフィルタ機能
**As a** 一般利用者
**I want to** カテゴリで商品を絞り込める
**So that** 関心のあるカテゴリの商品を効率的に閲覧できる

#### 受入基準
- [ ] 4つのカテゴリ（electronics, clothing, books, home）でフィルタできる
- [ ] 複数カテゴリの同時選択ができる
- [ ] 「すべて」選択で全商品が表示される
- [ ] フィルタ状態が視覚的に分かりやすく表示される

### US-007: ソート機能
**As a** 一般利用者
**I want to** 商品を並び替えられる
**So that** 価格や名前順で商品を比較できる

#### 受入基準
- [ ] 商品名（昇順・降順）でソートできる
- [ ] 価格（昇順・降順）でソートできる
- [ ] ソート基準が明確に表示される
- [ ] ソート後も検索・フィルタが維持される

---

## 4. ショッピングカート機能ユーザーストーリー

### US-008: カートへの商品追加
**As a** 一般利用者
**I want to** 商品をカートに追加できる
**So that** 後でまとめて購入できる

#### 受入基準
- [ ] 「カートに追加」ボタンで商品が追加される
- [ ] カート内商品数がリアルタイムで更新される
- [ ] 同じ商品の重複追加で数量が増加する
- [ ] カート追加時に視覚的フィードバックがある

### US-009: カート内容管理
**As a** 一般利用者
**I want to** カート内の商品を管理できる
**So that** 購入内容を調整できる

#### 受入基準
- [ ] 商品数量を増減できる
- [ ] 商品をカートから削除できる
- [ ] 合計金額が自動計算される
- [ ] カート内容がlocalStorageに保存される

#### テストシナリオ例
```gherkin
Scenario: 商品数量の変更
  Given カートに「スマートフォン」が1個入っている
  When 数量を「2」に変更する
  Then カート内の数量が「2」に更新される
  And 合計金額が正しく再計算される
```

### US-010: チェックアウト処理
**As a** 一般利用者
**I want to** 購入手続きを完了できる
**So that** 商品を注文できる

#### 受入基準
- [ ] チェックアウトボタンで購入処理が実行される
- [ ] 購入完了メッセージが表示される
- [ ] 購入後カートが空になる
- [ ] 購入履歴がlocalStorageに保存される

---

## 5. ToDoリスト機能ユーザーストーリー

### US-011: お気に入り商品メモ
**As a** 一般利用者
**I want to** お気に入り商品をメモできる
**So that** 後で商品を確認できる

#### 受入基準
- [ ] 商品名をToDoリストに追加できる
- [ ] ToDoアイテムにチェック状態を設定できる
- [ ] ToDoアイテムを削除できる
- [ ] ToDoリストがlocalStorageに保存される

### US-012: ToDo管理機能
**As a** 一般利用者
**I want to** ToDoリストを効率的に管理できる
**So that** 購入予定商品を整理できる

#### 受入基準
- [ ] ToDoアイテムの完了・未完了を切り替えられる
- [ ] 完了済みアイテムが視覚的に区別される
- [ ] ToDoリストの並び順を変更できる
- [ ] 一括削除機能がある

---

## 6. 言語切り替え機能ユーザーストーリー

### US-013: 多言語対応
**As a** 国際的利用者
**I want to** 言語を切り替えられる
**So that** 母国語でアプリケーションを利用できる

#### 受入基準
- [ ] 日本語と英語を切り替えられる
- [ ] UI要素がすべて翻訳される
- [ ] 商品名も言語に応じて表示される
- [ ] 言語設定がlocalStorageに保存される
- [ ] ページリロード後も言語設定が維持される

#### テストシナリオ例
```gherkin
Scenario: 言語切り替え
  Given アプリケーションが日本語で表示されている
  When ENボタンをクリックする
  Then 全てのUI要素が英語で表示される
  And 商品名も英語版が表示される
  And 言語設定が保存される
```

### US-014: 翻訳データ完全性
**As a** テスト学習者
**I want to** 翻訳データの完全性を確認できる
**So that** 国際化対応のテスト方法を学習できる

#### 受入基準
- [ ] 全てのテキストに翻訳が存在する
- [ ] 未翻訳項目が明確に識別される
- [ ] 文字化けや表示崩れがない
- [ ] 文字数制限に適合している

---

## 7. データ永続化機能ユーザーストーリー

### US-015: データ永続化
**As a** 一般利用者
**I want to** アプリケーションの状態が保存される
**So that** 次回利用時にデータが復元される

#### 受入基準
- [ ] ログイン状態がlocalStorageに保存される
- [ ] カート内容が永続化される
- [ ] ToDoリストが永続化される
- [ ] 言語設定が永続化される
- [ ] ページリロード後にデータが復元される

### US-016: ブラウザ互換性
**As a** 多様な環境の利用者
**I want to** 異なるブラウザで同じ機能を利用できる
**So that** 環境に制約されずにアプリケーションを利用できる

#### 受入基準
- [ ] Chrome、Firefox、Safari、Edgeで動作する
- [ ] localStorage機能が正常に動作する
- [ ] プライベートモードでも基本機能が動作する
- [ ] 古いブラウザで適切にデグレードする

---

## 8. 非機能要件ユーザーストーリー

### US-017: レスポンシブデザイン
**As a** モバイル利用者
**I want to** スマートフォンやタブレットで快適に利用できる
**So that** デバイスを問わずショッピングを楽しめる

#### 受入基準
- [ ] スマートフォン（375px〜）で適切に表示される
- [ ] タブレット（768px〜）で適切に表示される
- [ ] デスクトップ（1024px〜）で適切に表示される
- [ ] タッチ操作に対応している

### US-018: パフォーマンス
**As a** 一般利用者
**I want to** 高速にアプリケーションを利用できる
**So that** ストレスなくショッピングを完了できる

#### 受入基準
- [ ] 初期読み込み時間が3秒以内
- [ ] 画面遷移が1秒以内
- [ ] 大量データでも動作が重くならない
- [ ] メモリ使用量が適切

### US-019: アクセシビリティ
**As a** 視覚障害のある利用者
**I want to** スクリーンリーダーでアプリケーションを利用できる
**So that** 等しくサービスを享受できる

#### 受入基準
- [ ] 適切なalt属性が設定されている
- [ ] キーボードナビゲーションが可能
- [ ] 色のみに依存しない情報提供
- [ ] WCAG 2.1 AA準拠

### US-020: セキュリティ
**As a** セキュリティ意識の高い利用者
**I want to** 安全にアプリケーションを利用できる
**So that** 個人情報が保護される

#### 受入基準
- [ ] XSS攻撃に対する保護
- [ ] CSRFトークン検証（該当機能がある場合）
- [ ] 入力値の適切なサニタイゼーション
- [ ] セキュリティヘッダーの設定

---

## 9. 学習目的ユーザーストーリー

### US-021: テスト技法学習
**As a** テスト学習者
**I want to** 様々なテスト技法を実践できる
**So that** 体系的にテスト技術を習得できる

#### 受入基準
- [ ] 同値分割法の実践例がある
- [ ] 境界値分析の実践例がある
- [ ] 状態遷移テストの実践例がある
- [ ] ペアワイズテストの実践例がある
- [ ] ディシジョンテーブルの実践例がある

### US-022: 自動化学習
**As a** テスト学習者
**I want to** E2E自動化テストを実装できる
**So that** 自動化スキルを向上させることができる

#### 受入基準
- [ ] Page Object Modelの実装例がある
- [ ] データドリブンテストの実装例がある
- [ ] 並列実行テストの実装例がある
- [ ] ビジュアルリグレッションテストの実装例がある
- [ ] CI/CD統合の実装例がある

---

## 10. ストーリーマッピング

### 10.1 ユーザージャーニー: 新規利用者
```
言語選択 → ログイン → 商品閲覧 → 検索・フィルタ → カート追加 → チェックアウト → ログアウト
```

### 10.2 ユーザージャーニー: リピート利用者
```
自動ログイン → カート復元 → ToDo確認 → 商品追加 → 購入完了
```

### 10.3 ユーザージャーニー: テスト学習者
```
アプリ理解 → テストシナリオ作成 → 手動テスト実行 → 自動化実装 → CI/CD統合
```

---

## 11. 優先順位とリリース計画

### 11.1 優先度マトリックス

| 機能 | ビジネス価値 | 実装コスト | 優先度 |
|------|-------------|-----------|--------|
| 認証機能 | 高 | 低 | 最高 |
| 商品カタログ | 高 | 中 | 高 |
| ショッピングカート | 高 | 中 | 高 |
| 言語切り替え | 中 | 低 | 中 |
| ToDoリスト | 低 | 低 | 低 |

### 11.2 MVP定義
**Minimum Viable Product for Testing:**
- US-001: ログイン機能
- US-004: 商品一覧表示
- US-008: カートへの商品追加
- US-010: チェックアウト処理
- US-015: データ永続化

---

## 12. 受入基準詳細化ガイドライン

### 12.1 受入基準記述ルール
1. **具体的**: 測定可能な明確な基準
2. **テスト可能**: 検証可能な内容
3. **完全**: 全ての重要な側面をカバー
4. **一貫性**: 他のストーリーとの整合性

### 12.2 Definition of Done
各ユーザーストーリーは以下の条件を満たした時に「完了」とみなす：
- [ ] 受入基準がすべて満たされている
- [ ] 単体テストが実装され、通過している
- [ ] 統合テストが実装され、通過している
- [ ] コードレビューが完了している
- [ ] ドキュメントが更新されている
- [ ] 該当するリグレッションテストが通過している

---

## 13. 改版履歴

| 版数 | 日付 | 変更内容 | 変更者 |
|------|------|----------|--------|
| 1.0 | 2025-09-21 | 初版作成 | Claude Code |

---

## 承認

| 役割 | 氏名 | 署名 | 日付 |
|------|------|------|------|
| Product Owner | [TBD] | [TBD] | [TBD] |
| Scrum Master | [TBD] | [TBD] | [TBD] |
| 開発チームリーダー | [TBD] | [TBD] | [TBD] |